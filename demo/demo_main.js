(()=>{"use strict";var e,t={349:(e,t,i)=>{var a=i(899),r=i(75),n=i(471);class o{static initCamera(e,t,i){const a=new r.cPb(45,t/i,1,400);return a.position.set(0,0,100),e.add(a),a}static initLight(e){const t=new r.Mig(16777215,1);return e.add(t),t}static initHelper(e,t=30){const i=new r.y8_(t);e.add(i)}static initCube(e,t=5){const i=e=>new r.vBJ({color:e,opacity:.5,transparent:!0,wireframe:!0}),a=new r.DvJ(t,t,t),n=[i(65280),i(16711680),i(255),i(65280),i(16711680),i(255)],o=new r.Kj0(a,n);return e.add(o),o}static initRenderer(e,t,i=0,a="webgl-canvas",n=!0){const o=document.getElementById(a);o.style.zIndex=0,o.style.position="absolute";const s=new r.CP7({canvas:o,antialias:n});return s.setClearColor(new r.Ilk(i)),s.setSize(e,t),s.setPixelRatio(window.devicePixelRatio),s}static render(e,t,i){const a=()=>{e.render(t,i),requestAnimationFrame(a)};a()}}var s=i(678);let l,h,p;let c;const d=(e,t)=>{const i={toggleRandomMove:()=>{null!=c?m(t):P(t)}};e.add(i,"toggleRandomMove")},m=e=>{e.tweens.stop(),clearInterval(c),c=null},P=e=>{const t=()=>{const t=new r.$V(105,Math.random()*Math.PI,Math.random()*Math.PI*6-3*Math.PI);e.move(t,{duration:1500,easing:n.default.Easing.Cubic.Out}),console.log("Start : ",t)};t(),c=setInterval(t,2e3)},T=(e,t)=>{const i=e.addFolder("add method");i.open(),u(s.SphericalParamType.R,5,i,t),u(s.SphericalParamType.R,-5,i,t),u(s.SphericalParamType.PHI,.1,i,t),u(s.SphericalParamType.PHI,-.1,i,t),u(s.SphericalParamType.THETA,.1,i,t),u(s.SphericalParamType.THETA,-.1,i,t)},u=(e,t,i,a)=>{const r={};let n=t.toString();t>0&&(n="+"+n);const o=e+n;r[o]=()=>{a.addPosition(e,t)},i.add(r,o)},v=(e,t)=>{const i=e.addFolder("loop method");i.open(),E(s.SphericalParamType.R,30,150,i,t),E(s.SphericalParamType.PHI,0,Math.PI,i,t),E(s.SphericalParamType.THETA,-Math.PI/4,Math.PI/4,i,t)},E=(e,t,i,a,r)=>{let n=!1;const o={duration:1e4},s="loop_"+e,l={};l[s]=()=>{n?r.stopLoop(e):r.loop(e,t,i,o),n=!n},a.add(l,s)};window.onload=()=>{h=new r.xsS,p=o.initCamera(h,1280,800),l=o.initRenderer(1280,800),o.initLight(h),console.log(0===s.SphericalControllerUtil.PI2ToPI(0)),console.log(s.SphericalControllerUtil.PI2ToPI(Math.PI)===Math.PI),console.log(s.SphericalControllerUtil.PI2ToPI(-Math.PI)===-Math.PI),console.log(s.SphericalControllerUtil.PI2ToPI(2*Math.PI)),console.log(s.SphericalControllerUtil.PI2ToPI(Math.PI+.01)===.01-Math.PI),console.log(Math.abs(s.SphericalControllerUtil.PI2ToPI(200*Math.PI+.01)-.01)<1e-6),o.initHelper(h),o.initCube(h);const e=s.SphericalControllerUtil.generateCameraTarget();h.add(e);const t=((e,t)=>{const i=new s.SphericalController(p,e);return i.initCameraPosition(new r.$V(t,1e-4,2*Math.PI*12)),i.initCameraShift(new r.Pa4(20,0,0)),i.duration=1666,i.addEventListener(s.SphericalControllerEventType.MOVED_CAMERA_COMPLETE,(e=>{console.log("Complete : ",e)})),i})(e,105);(e=>{setInterval((()=>{console.log(e.tweens.isPlaying())}),100)})(t),o.render(l,h,p),(e=>{const t=new a.ZP;d(t,e),T(t,e),v(t,e)})(t)}},182:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPositionLimiter=void 0;const a=i(366);class r{constructor(){this.phiMin=r.EPS,this.phiMax=Math.PI-r.EPS,this.thetaMin=null,this.thetaMax=null,this.rMax=Number.MAX_VALUE,this.rMin=r.EPS}setLimit(e,t,i){switch(e){case a.SphericalParamType.PHI:this.phiMax=t,this.phiMin=i;break;case a.SphericalParamType.THETA:this.thetaMax=t,this.thetaMin=i}}clampWithType(e,t){switch(e){case a.SphericalParamType.PHI:return r.clamp(t,this.phiMax,this.phiMin);case a.SphericalParamType.THETA:return r.clamp(t,this.thetaMax,this.thetaMin);case a.SphericalParamType.R:return r.clamp(t,this.rMax,this.rMin)}return t}clampPosition(e,t){const i=t[e];return this.clampWithType(e,i)}static clamp(e,t,i){return null==i||null==t?e:(e=Math.min(e,t),e=Math.max(e,i))}}t.CameraPositionLimiter=r,r.EPS=1e-6},412:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPositionUpdater=void 0;const a=i(232),r=i(987),n=i(952),o=i(27);t.CameraPositionUpdater=class{constructor(e,t){this.isUpdate=!1,this.setNeedUpdate=e=>{this.isUpdate=!0,this.updateEvent=e},this.updatePosition=()=>{if(!this.isUpdate)return;this.isUpdate=!1;const e=this.updateEvent,t=new a.Vector3,i=this._camera.position;if(i.setFromSpherical(e.position),i.add(e.cameraTarget.getWorldPosition(t)),this._camera.position.set(i.x,i.y,i.z),this._camera.lookAt(e.cameraTarget.getWorldPosition(t)),e.shift){const t=this._camera.position.clone(),i=new a.Vector3(e.shift.x,e.shift.y,e.shift.z);i.applyEuler(this._camera.rotation.clone()),t.add(i),this._camera.position.set(t.x,t.y,t.z)}this.dispatcher.dispatchEvent(new r.SphericalControllerEvent(r.SphericalControllerEventType.MOVED_CAMERA))},this.dispatcher=e,this._camera=t,this.dispatcher.addEventListener(n.CameraUpdateEventType.UPDATE,this.setNeedUpdate),o.RAFTicker.on(o.RAFTickerEventType.onBeforeTick,(e=>{this.updatePosition()}))}}},952:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraUpdateEventType=t.CameraUpdateEvent=void 0,t.CameraUpdateEvent=class{constructor(e,t,i,a){this.type=e,this.cameraTarget=t,this.position=i,this.shift=a}},(t.CameraUpdateEventType||(t.CameraUpdateEventType={})).UPDATE="CameraEvent_TYPE_UPDATE"},755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EasingOption=void 0;class i{static init(e,t,a=!1){null==e&&(e=new i),e.duration=this.supplement(e.duration,t.tweens.duration);const r=a?t.tweens.loopEasing:t.tweens.easing;return e.easing=this.supplement(e.easing,r),e.normalize=this.supplement(e.normalize,!0),e}static supplement(e,t){return null==e?t:e}}t.EasingOption=i},655:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalController=void 0;const a=i(471),r=i(955),n=i(232),o=i(232),s=i(987),l=i(366),h=i(755),p=i(637),c=i(182),d=i(68),m=i(412),P=i(952);class T extends n.EventDispatcher{constructor(e,t){var i,a;super(),this.pos=new n.Spherical,this.cameraShift=new n.Vector3,this.tweens=new d.SphericalControllerTween,this.limiter=new c.CameraPositionLimiter,this.dispatchUpdateEvent=()=>{const e=new P.CameraUpdateEvent(P.CameraUpdateEventType.UPDATE,this._cameraTarget,this.pos,this.cameraShift);this.dispatchEvent(e)},this._cameraTarget=t,null!==(i=(a=this._cameraTarget).material)&&void 0!==i||(a.material=new o.MeshBasicMaterial({color:16711680,opacity:0,transparent:!0})),this.cameraUpdater=new m.CameraPositionUpdater(this,e),r.TWEENTicker.start()}initCameraPosition(e,t){this.pos=e;const i=this.limiter;this.pos.phi=i.clampPosition(l.SphericalParamType.PHI,this.pos),this.pos.theta=i.clampPosition(l.SphericalParamType.THETA,this.pos),this.pos.radius=i.clampPosition(l.SphericalParamType.R,this.pos),t&&this._cameraTarget.position.set(t.x,t.y,t.z),this.dispatchUpdateEvent()}initCameraShift(e){this.cameraShift=e.clone(),this.dispatchUpdateEvent()}move(e,t){t=h.EasingOption.init(t,this),this.tweens.stop(),this.movePosition(l.SphericalParamType.R,e.radius,t),this.movePosition(l.SphericalParamType.PHI,e.phi,t),this.movePosition(l.SphericalParamType.THETA,e.theta,t)}changeTarget(e){this._cameraTarget=e}movePosition(e,t,i){i=h.EasingOption.init(i,this),e===l.SphericalParamType.THETA&&i.normalize&&(t=p.SphericalControllerUtil.getTweenTheta(this.pos.theta,t));const a=this.limiter.clampWithType(e,t);this.tweens.overrideTween(e,this.getTweenPosition(e,a,i))}getTweenPosition(e,t,i){const r={};return r[e]=t,new a.Tween(this.pos).to(r,i.duration).easing(i.easing).onUpdate(this.dispatchUpdateEvent).onComplete((()=>{this.onCompleteCameraTween(e)})).start()}onCompleteCameraTween(e){this.dispatchEvent(new s.SphericalControllerEvent(s.SphericalControllerEventType.MOVED_CAMERA_COMPLETE,e))}moveTarget(e,t){t=h.EasingOption.init(t,this);const i=new a.Tween(this._cameraTarget.position).to({x:e.x,y:e.y,z:e.z},t.duration).easing(t.easing).onUpdate(this.dispatchUpdateEvent).start();this.tweens.overrideTween(l.TargetParam.CAMERA_TARGET,i)}stopLoop(e){this.tweens.stopTween(e)}loop(e,t,i,r){e===l.SphericalParamType.THETA&&(this.pos.theta=p.SphericalControllerUtil.PI2ToPI(this.pos.theta)),r=h.EasingOption.init(r,this,!0);const n=this.limiter.clampWithType(e,t),o=this.limiter.clampWithType(e,i),s={};s[e]=o;const c={};c[e]=n;const d=p.SphericalControllerUtil.getFirstDuration(r.duration,this.pos[e],o,n),m=new a.Tween(this.pos).easing(r.easing).to(c,d).onUpdate(this.dispatchUpdateEvent).onComplete((()=>{const t=new a.Tween(this.pos).to(s,r.duration).yoyo(!0).easing(r.easing).onUpdate(this.dispatchUpdateEvent).repeat(1/0).start();this.tweens.overrideTween(e,t)})).start();this.tweens.overrideTween(e,m)}moveCameraShift(e,t){t=h.EasingOption.init(t,this);const i=new a.Tween(this.cameraShift).easing(t.easing).to({x:e.x,y:e.y,z:e.z},t.duration).onUpdate(this.dispatchUpdateEvent).start();this.tweens.overrideTween(l.TargetParam.CAMERA_SHIFT,i)}addTargetPosition(e,t=!1){!t&&this.tweens.isPlaying()||(t&&this.tweens.isPlaying()&&this.tweens.stop(),this._cameraTarget.position.add(e),this.dispatchUpdateEvent())}addPosition(e,t,i=!1,a=!1){if(!i){if(!a&&this.tweens.isPlaying())return;if(a&&this.tweens.isPlayingWithKey(e))return}i&&this.tweens.isPlaying()&&this.tweens.stop(),this.pos[e]+=t,this.pos[e]=this.limiter.clampPosition(e,this.pos),this.dispatchUpdateEvent()}copySphericalPosition(e){return e.copy(this.pos)}cloneSphericalPosition(){return this.pos.clone()}}t.SphericalController=T},987:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerEventType=t.SphericalControllerEvent=void 0,t.SphericalControllerEvent=class{constructor(e,t){this.type=e,this.targetParam=t}},(i=t.SphericalControllerEventType||(t.SphericalControllerEventType={})).MOVED_CAMERA="CameraEvent_TYPE_MOVED_CAMERA",i.MOVED_CAMERA_COMPLETE="CameraEvent_TYPE_MOVED_CAMERA_COMPLETE"},68:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerTween=void 0;const a=i(471);t.SphericalControllerTween=class{constructor(){this.tweenMap=new Map,this.duration=1333,this.easing=a.Easing.Cubic.Out,this.loopEasing=a.Easing.Sinusoidal.InOut}stopTween(e){const t=this.tweenMap.get(e);t&&(t.stop(),this.tweenMap.delete(e))}overrideTween(e,t){this.stopTween(e),t&&this.tweenMap.set(e,t)}isPlaying(){let e=!1;return this.tweenMap.forEach(((t,i)=>{(null==t?void 0:t.isPlaying())&&(e=!0)})),e}isPlayingWithKey(e){var t;return null===(t=this.tweenMap.get(e))||void 0===t?void 0:t.isPlaying()}stop(){this.tweenMap.forEach(((e,t)=>{t&&this.stopTween(t)}))}}},637:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerUtil=void 0;const a=i(232),r=i(232),n=i(232);t.SphericalControllerUtil=class{static getTweenTheta(e,t){t=this.PI2ToPI(t);let i=this.PI2ToPI(e);return i=this.PI2ToPI(t-i),e+i}static PI2ToPI(e){return Math.atan2(Math.sin(e),Math.cos(e))}static getFirstDuration(e,t,i,a){return Math.abs(e*((t-a)/(i-a)))}static generateCameraTarget(){const e=new n.SphereBufferGeometry(1,3,3),t=new r.MeshBasicMaterial({color:16711680,opacity:0,transparent:!0});return new a.Mesh(e,t)}}},366:(e,t)=>{var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalParamType=t.TargetParam=void 0,(a=t.TargetParam||(t.TargetParam={})).CAMERA_TARGET="cameraTarget",a.CAMERA_SHIFT="cameraShift",(i=t.SphericalParamType||(t.SphericalParamType={})).R="radius",i.PHI="phi",i.THETA="theta"},678:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,r)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(655),t),r(i(637),t),r(i(987),t),r(i(755),t),r(i(366),t),r(i(952),t),r(i(412),t),r(i(182),t),r(i(68),t)}},i={};function a(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,i,r,n)=>{if(!i){var o=1/0;for(p=0;p<e.length;p++){for(var[i,r,n]=e[p],s=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((e=>a.O[e](i[l])))?i.splice(l--,1):(s=!1,n<o&&(o=n));if(s){e.splice(p--,1);var h=r();void 0!==h&&(t=h)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[i,r,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={177:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var r,n,[o,s,l]=i,h=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var p=l(a)}for(t&&t(i);h<o.length;h++)n=o[h],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(p)},i=self.webpackChunkthreejs_spherical_controls=self.webpackChunkthreejs_spherical_controls||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=a.O(void 0,[736],(()=>a(349)));r=a.O(r)})();