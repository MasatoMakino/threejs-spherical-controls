(()=>{"use strict";var e,t={349:(e,t,a)=>{var i=a(694),r=a(709),n=a(471);class s{static initCamera(e,t,a){const i=new r.PerspectiveCamera(45,t/a,1,400);return i.position.set(0,0,100),e.add(i),i}static initLight(e){const t=new r.AmbientLight(16777215,1);return e.add(t),t}static initHelper(e,t=30){const a=new r.AxesHelper(t);e.add(a)}static initCube(e,t=5){const a=e=>new r.MeshBasicMaterial({color:e,opacity:.5,transparent:!0,wireframe:!0}),i=new r.BoxGeometry(t,t,t),n=[a(65280),a(16711680),a(255),a(65280),a(16711680),a(255)],s=new r.Mesh(i,n);return e.add(s),s}static initRenderer(e,t,a=0,i="webgl-canvas",n=!0){const s=document.getElementById(i);s.style.zIndex=0,s.style.position="absolute";const o=new r.WebGLRenderer({canvas:s,antialias:n});return o.setClearColor(new r.Color(a)),o.setSize(e,t),o.setPixelRatio(window.devicePixelRatio),o}static render(e,t,a){const i=()=>{e.render(t,a),requestAnimationFrame(i)};i()}}var o=a(678);let l,h,p;let c;const d=(e,t)=>{const a={toggleRandomMove:()=>{null!=c?m(t):T(t)}};e.add(a,"toggleRandomMove")},m=e=>{e.tweens.stop(),clearInterval(c),c=null},T=e=>{const t=()=>{const t=new r.Spherical(105,Math.random()*Math.PI,Math.random()*Math.PI*6-3*Math.PI);e.move(t,{duration:1500,easing:n.default.Easing.Cubic.Out}),console.log("Start : ",t)};t(),c=setInterval(t,2e3)},P=(e,t)=>{const a=e.addFolder("add method");a.open(),u(o.SphericalParamType.R,5,a,t),u(o.SphericalParamType.R,-5,a,t),u(o.SphericalParamType.PHI,.1,a,t),u(o.SphericalParamType.PHI,-.1,a,t),u(o.SphericalParamType.THETA,.1,a,t),u(o.SphericalParamType.THETA,-.1,a,t)},u=(e,t,a,i)=>{const r={};let n=t.toString();t>0&&(n="+"+n);const s=e+n;r[s]=()=>{i.addPosition(e,t)},a.add(r,s)},v=(e,t)=>{const a=e.addFolder("loop method");a.open(),E(o.SphericalParamType.R,30,150,a,t),E(o.SphericalParamType.PHI,0,Math.PI,a,t),E(o.SphericalParamType.THETA,-Math.PI/4,Math.PI/4,a,t)},E=(e,t,a,i,r)=>{let n=!1;const s={duration:1e4},o="loop_"+e,l={};l[o]=()=>{n?r.stopLoop(e):r.loop(e,t,a,s),n=!n},i.add(l,o)};window.onload=()=>{h=new r.Scene,p=s.initCamera(h,1280,800),l=s.initRenderer(1280,800),s.initLight(h),console.log(0===o.SphericalControllerUtil.PI2ToPI(0)),console.log(o.SphericalControllerUtil.PI2ToPI(Math.PI)===Math.PI),console.log(o.SphericalControllerUtil.PI2ToPI(-Math.PI)===-Math.PI),console.log(o.SphericalControllerUtil.PI2ToPI(2*Math.PI)),console.log(o.SphericalControllerUtil.PI2ToPI(Math.PI+.01)===.01-Math.PI),console.log(Math.abs(o.SphericalControllerUtil.PI2ToPI(200*Math.PI+.01)-.01)<1e-6),s.initHelper(h),s.initCube(h);const e=o.SphericalControllerUtil.generateCameraTarget();h.add(e);const t=((e,t)=>{const a=new o.SphericalController(p,e);return a.initCameraPosition(new r.Spherical(t,1e-4,2*Math.PI*12)),a.initCameraShift(new r.Vector3(20,0,0)),a.duration=1666,a.addEventListener(o.SphericalControllerEventType.MOVED_CAMERA_COMPLETE,(e=>{console.log("Complete : ",e)})),a})(e,105);(e=>{setInterval((()=>{console.log(e.tweens.isPlaying())}),100)})(t),s.render(l,h,p),(e=>{const t=new i.XS;d(t,e),P(t,e),v(t,e)})(t)}},182:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPositionLimiter=void 0;const i=a(366);class r{constructor(){this.phiMin=r.EPS,this.phiMax=Math.PI-r.EPS,this.thetaMin=null,this.thetaMax=null,this.rMax=Number.MAX_VALUE,this.rMin=r.EPS}setLimit(e,t,a){switch(e){case i.SphericalParamType.PHI:this.phiMax=t,this.phiMin=a;break;case i.SphericalParamType.THETA:this.thetaMax=t,this.thetaMin=a}}clampWithType(e,t){switch(e){case i.SphericalParamType.PHI:return r.clamp(t,this.phiMax,this.phiMin);case i.SphericalParamType.THETA:return r.clamp(t,this.thetaMax,this.thetaMin);case i.SphericalParamType.R:return r.clamp(t,this.rMax,this.rMin)}return t}clampPosition(e,t){const a=t[e];return this.clampWithType(e,a)}static clamp(e,t,a){return null==a||null==t?e:(e=Math.min(e,t),e=Math.max(e,a))}}t.CameraPositionLimiter=r,r.EPS=1e-6},412:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPositionUpdater=void 0;const i=a(709),r=a(987),n=a(952),s=a(27);t.CameraPositionUpdater=class{constructor(e,t,a){this.isUpdate=!1,this.setNeedUpdate=e=>{this.isUpdate=!0,this.updateEvent=e},this.updatePosition=()=>{if(!this.isUpdate)return;this.isUpdate=!1;const e=this.updateEvent,t=new i.Vector3,a=this._camera.position;if(a.setFromSpherical(e.position),a.add(e.cameraTarget.getWorldPosition(t)),this._camera.position.set(a.x,a.y,a.z),this._camera.lookAt(e.cameraTarget.getWorldPosition(t)),e.shift){const t=this._camera.position.clone(),a=new i.Vector3(e.shift.x,e.shift.y,e.shift.z);a.applyEuler(this._camera.rotation.clone()),t.add(a),this._camera.position.set(t.x,t.y,t.z)}this.dispatcher.dispatchEvent(new r.SphericalControllerEvent(r.SphericalControllerEventType.MOVED_CAMERA))},this.dispatcher=e,this._camera=t,this.dispatcher.addEventListener(n.CameraUpdateEventType.UPDATE,this.setNeedUpdate),s.RAFTicker.on(s.RAFTickerEventType.onBeforeTick,(e=>{this.updatePosition()}))}}},952:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraUpdateEventType=t.CameraUpdateEvent=void 0,t.CameraUpdateEvent=class{constructor(e,t,a,i){this.type=e,this.cameraTarget=t,this.position=a,this.shift=i}},(t.CameraUpdateEventType||(t.CameraUpdateEventType={})).UPDATE="CameraEvent_TYPE_UPDATE"},755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EasingOption=void 0;class a{static init(e,t,i=!1){null==e&&(e=new a),e.duration=this.supplement(e.duration,t.tweens.duration);const r=i?t.tweens.loopEasing:t.tweens.easing;return e.easing=this.supplement(e.easing,r),e.normalize=this.supplement(e.normalize,!0),e}static supplement(e,t){return null==e?t:e}}t.EasingOption=a},655:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalController=void 0;const i=a(471),r=a(955),n=a(709),s=a(709),o=a(987),l=a(366),h=a(755),p=a(637),c=a(182),d=a(68),m=a(412),T=a(952);class P extends n.EventDispatcher{constructor(e,t){var a,i;super(),this.pos=new n.Spherical,this.cameraShift=new n.Vector3,this.tweens=new d.SphericalControllerTween,this.limiter=new c.CameraPositionLimiter,this.dispatchUpdateEvent=()=>{const e=new T.CameraUpdateEvent(T.CameraUpdateEventType.UPDATE,this._cameraTarget,this.pos,this.cameraShift);this.dispatchEvent(e)},this._cameraTarget=t,null!==(a=(i=this._cameraTarget).material)&&void 0!==a||(i.material=new s.MeshBasicMaterial({color:16711680,opacity:0,transparent:!0})),this.cameraUpdater=new m.CameraPositionUpdater(this,e,this._cameraTarget),r.TWEENTicker.start()}initCameraPosition(e,t){this.pos=e;const a=this.limiter;this.pos.phi=a.clampPosition(l.SphericalParamType.PHI,this.pos),this.pos.theta=a.clampPosition(l.SphericalParamType.THETA,this.pos),this.pos.radius=a.clampPosition(l.SphericalParamType.R,this.pos),t&&this._cameraTarget.position.set(t.x,t.y,t.z),this.dispatchUpdateEvent()}initCameraShift(e){this.cameraShift=e.clone(),this.dispatchUpdateEvent()}move(e,t){t=h.EasingOption.init(t,this),this.tweens.stop(),this.movePosition(l.SphericalParamType.R,e.radius,t),this.movePosition(l.SphericalParamType.PHI,e.phi,t),this.movePosition(l.SphericalParamType.THETA,e.theta,t)}changeTarget(e){this._cameraTarget=e}movePosition(e,t,a){a=h.EasingOption.init(a,this),e===l.SphericalParamType.THETA&&a.normalize&&(t=p.SphericalControllerUtil.getTweenTheta(this.pos.theta,t));const i=this.limiter.clampWithType(e,t);this.tweens.overrideTween(e,this.getTweenPosition(e,i,a))}getTweenPosition(e,t,a){const r={};return r[e]=t,new i.Tween(this.pos).to(r,a.duration).easing(a.easing).onUpdate(this.dispatchUpdateEvent).onComplete((()=>{this.onCompleteCameraTween(e)})).start()}onCompleteCameraTween(e){this.dispatchEvent(new o.SphericalControllerEvent(o.SphericalControllerEventType.MOVED_CAMERA_COMPLETE,e))}moveTarget(e,t){t=h.EasingOption.init(t,this);const a=new i.Tween(this._cameraTarget.position).to({x:e.x,y:e.y,z:e.z},t.duration).easing(t.easing).onUpdate(this.dispatchUpdateEvent).start();this.tweens.overrideTween(l.TargetParam.CAMERA_TARGET,a)}stopLoop(e){this.tweens.stopTween(e)}loop(e,t,a,r){e===l.SphericalParamType.THETA&&(this.pos.theta=p.SphericalControllerUtil.PI2ToPI(this.pos.theta)),r=h.EasingOption.init(r,this,!0);const n=this.limiter.clampWithType(e,t),s=this.limiter.clampWithType(e,a),o={};o[e]=s;const c={};c[e]=n;const d=p.SphericalControllerUtil.getFirstDuration(r.duration,this.pos[e],s,n),m=new i.Tween(this.pos).easing(r.easing).to(c,d).onUpdate(this.dispatchUpdateEvent).onComplete((()=>{const t=new i.Tween(this.pos).to(o,r.duration).yoyo(!0).easing(r.easing).onUpdate(this.dispatchUpdateEvent).repeat(1/0).start();this.tweens.overrideTween(e,t)})).start();this.tweens.overrideTween(e,m)}moveCameraShift(e,t){t=h.EasingOption.init(t,this);const a=new i.Tween(this.cameraShift).easing(t.easing).to({x:e.x,y:e.y,z:e.z},t.duration).onUpdate(this.dispatchUpdateEvent).start();this.tweens.overrideTween(l.TargetParam.CAMERA_SHIFT,a)}addTargetPosition(e,t=!1){!t&&this.tweens.isPlaying()||(t&&this.tweens.isPlaying()&&this.tweens.stop(),this._cameraTarget.position.add(e),this.dispatchUpdateEvent())}addPosition(e,t,a=!1){!a&&this.tweens.isPlaying()||(a&&this.tweens.isPlaying()&&this.tweens.stop(),this.pos[e]+=t,this.pos[e]=this.limiter.clampPosition(e,this.pos),this.dispatchUpdateEvent())}}t.SphericalController=P},987:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerEventType=t.SphericalControllerEvent=void 0,t.SphericalControllerEvent=class{constructor(e,t){this.type=e,this.targetParam=t}},(a=t.SphericalControllerEventType||(t.SphericalControllerEventType={})).MOVED_CAMERA="CameraEvent_TYPE_MOVED_CAMERA",a.MOVED_CAMERA_COMPLETE="CameraEvent_TYPE_MOVED_CAMERA_COMPLETE"},68:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerTween=void 0;const i=a(471);t.SphericalControllerTween=class{constructor(){this.tweenMap=new Map,this.duration=1333,this.easing=i.Easing.Cubic.Out,this.loopEasing=i.Easing.Sinusoidal.InOut}stopTween(e){const t=this.tweenMap.get(e);t&&(t.stop(),this.tweenMap.delete(e))}overrideTween(e,t){this.stopTween(e),t&&this.tweenMap.set(e,t)}isPlaying(){let e=!1;return this.tweenMap.forEach(((t,a)=>{t&&t.isPlaying()&&(e=!0)})),e}stop(){this.tweenMap.forEach(((e,t)=>{t&&this.stopTween(t)}))}}},637:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalControllerUtil=void 0;const i=a(709),r=a(709),n=a(709);t.SphericalControllerUtil=class{static getTweenTheta(e,t){t=this.PI2ToPI(t);let a=this.PI2ToPI(e);return a=this.PI2ToPI(t-a),e+a}static PI2ToPI(e){return Math.atan2(Math.sin(e),Math.cos(e))}static getFirstDuration(e,t,a,i){return Math.abs(e*((t-i)/(a-i)))}static generateCameraTarget(){const e=new n.SphereBufferGeometry(1,3,3),t=new r.MeshBasicMaterial({color:16711680,opacity:0,transparent:!0});return new i.Mesh(e,t)}}},366:(e,t)=>{var a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalParamType=t.TargetParam=void 0,(i=t.TargetParam||(t.TargetParam={})).CAMERA_TARGET="cameraTarget",i.CAMERA_SHIFT="cameraShift",(a=t.SphericalParamType||(t.SphericalParamType={})).R="radius",a.PHI="phi",a.THETA="theta"},678:function(e,t,a){var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),r=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||i(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a(655),t),r(a(637),t),r(a(987),t),r(a(755),t),r(a(366),t)}},a={};function i(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,a,r,n)=>{if(!a){var s=1/0;for(p=0;p<e.length;p++){for(var[a,r,n]=e[p],o=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(i.O).every((e=>i.O[e](a[l])))?a.splice(l--,1):(o=!1,n<s&&(s=n));if(o){e.splice(p--,1);var h=r();void 0!==h&&(t=h)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[a,r,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={177:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[s,o,l]=a,h=0;if(s.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var p=l(i)}for(t&&t(a);h<s.length;h++)n=s[h],i.o(e,n)&&e[n]&&e[n][0](),e[s[h]]=0;return i.O(p)},a=self.webpackChunkthreejs_spherical_controls=self.webpackChunkthreejs_spherical_controls||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=i.O(void 0,[736],(()=>i(349)));r=i.O(r)})();